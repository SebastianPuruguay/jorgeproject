(function(){"use strict";var e={8990:function(e,a,o){var t=o(3751),n=o(641),i=(o(8111),o(116),o(7588),o(33));const l={class:"header"},r={class:"toolbar"};function c(e,a){return(0,n.uX)(),(0,n.CE)("header",l,[(0,n.Lk)("div",r,[(0,n.Lk)("button",{class:"menu-btn",onClick:a[0]||(a[0]=a=>e.$emit("toggleDrawer"))}," â˜° "),a[1]||(a[1]=(0,n.Lk)("h1",{class:"title"},"Mi Proyecto",-1))])])}var d=o(6262);const s={},u=(0,d.A)(s,[["render",c],["__scopeId","data-v-6e1825cd"]]);var m=u,p=o(953);const g={class:"footer"},v={class:"copyright"};var h={__name:"BarraInform",setup(e){const a=(0,p.KR)((new Date).getFullYear());return(e,o)=>((0,n.uX)(),(0,n.CE)("footer",g,[o[0]||(o[0]=(0,n.Fv)('<div class="container" data-v-4cc94d54><div class="logo-section" data-v-4cc94d54><img src="https://via.placeholder.com/50" alt="Logo" class="logo" data-v-4cc94d54><span class="name" data-v-4cc94d54>Nombre de la Persona</span></div><nav class="nav-links" data-v-4cc94d54><ul data-v-4cc94d54><li data-v-4cc94d54><a href="/" data-v-4cc94d54>Sobre mÃ­</a></li><li data-v-4cc94d54><a href="/" data-v-4cc94d54>Proyectos</a></li><li data-v-4cc94d54><a href="/" data-v-4cc94d54>Contacto</a></li><li data-v-4cc94d54><a href="/" data-v-4cc94d54>TÃ©rminos</a></li></ul></nav><div class="social-links" data-v-4cc94d54><a href="#" data-v-4cc94d54><i class="fab fa-facebook" data-v-4cc94d54></i></a><a href="#" data-v-4cc94d54><i class="fab fa-twitter" data-v-4cc94d54></i></a><a href="#" data-v-4cc94d54><i class="fab fa-instagram" data-v-4cc94d54></i></a><a href="#" data-v-4cc94d54><i class="fab fa-linkedin" data-v-4cc94d54></i></a></div></div><hr class="divider" data-v-4cc94d54>',2)),(0,n.Lk)("div",v," Â© "+(0,i.v_)(a.value)+" Nombre de la Persona. Todos los derechos reservados. ",1)]))}};const f=(0,d.A)(h,[["__scopeId","data-v-4cc94d54"]]);var x=f,y=(o(4603),o(7566),o(8721),o(4335));const b="t7DN3Z1XFITFRMPBxS4wg0vWUT8kTkrG",k="yiFYoi36tibqoCpsTmdz10QuPyPRZqoR0h1GEQ9R779SSilWLMxwtcy8I5vmeiHT";async function w(){try{const e=await y.A.post("/api/iot/v1/clients/token",new URLSearchParams({grant_type:"client_credentials",client_id:b,client_secret:k,audience:"https://api2.arduino.cc/iot"}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return e.data.access_token}catch(e){throw console.error("Error al obtener el token:",e),e}}async function A(){try{const e=await w(),a=await y.A.get("/api/iot/v2/things/5e7d6f36-3fc2-4d2a-a743-2e864ab34fd3/properties",{headers:{Authorization:`Bearer ${e}`}});return a.data}catch(e){throw console.error("Error al obtener las Things:",e),e}}var C=o(3481);o(9389);const F=[{latitude:-12.104012431996967,longitude:-76.95982523850891},{latitude:-12.11033909960645,longitude:-76.97828666105377}];var M=o.p+"img/icon.598f9e85.png",L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";o(3579);const E={class:"modal-header"},T={class:"modal-body"},S={class:"contamination-section"},_={class:"contamination-header"},P={class:"contamination-body"},O={class:"value"},z={class:"recommendations"},B={key:0},K={key:1},X={key:2},R={key:3},N={class:"modal-footer"};var j={__name:"ModalMasInfo",setup(e){const a={Temperature:"Â°C",Humidity:"%",CO2:"ppm",PM10:"Âµg/mÂ³",PM1_0:"Âµg/mÂ³",PM2_5:"Âµg/mÂ³"},o=(0,p.KR)([]);(0,n.wB)(o,(e=>{console.log("ðŸ“Œ Nuevo valor de things:",e)})),(0,n.sV)((async()=>{try{const e=await A();o.value=Array.isArray(e)?e:[],console.log("âœ… Datos cargados en things:",o.value)}catch(e){console.error("âŒ Error al cargar things:",e),o.value=[]}}));const l=(0,n.EW)((()=>o.value?.some((e=>"CO2"===e.name&&e.last_value>1e3||e.name.startsWith("PM")&&e.last_value>50))??!1)),r=(0,n.EW)((()=>o.value?.some((e=>"CO2"===e.name&&e.last_value>1500||e.name.startsWith("PM")&&e.last_value>100))??!1)),c=(0,n.EW)((()=>o.value?.some((e=>"CO2"===e.name&&e.last_value>2e3||e.name.startsWith("PM")&&e.last_value>150))??!1)),d=(0,n.EW)((()=>!l.value&&!r.value&&!c.value)),s=e=>{e.target.classList.contains("modal-overlay")&&(e.preventDefault(),e.stopPropagation(),emit("close"))};return(e,u)=>((0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:s},[(0,n.Lk)("div",{class:"modal-content",onClick:u[2]||(u[2]=(0,t.D$)((()=>{}),["stop"]))},[(0,n.Lk)("div",E,[u[3]||(u[3]=(0,n.Lk)("h2",null," InformaciÃ³n Detallada - FabLab ESAN - 21/03/2025 ",-1)),(0,n.Lk)("button",{class:"close-button",onClick:u[0]||(u[0]=a=>e.$emit("close"))},"Ã—")]),(0,n.Lk)("div",T,[(0,n.Lk)("div",S,[u[4]||(u[4]=(0,n.Lk)("h3",null,"Informacion General",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.value,((e,o)=>((0,n.uX)(),(0,n.CE)("div",{key:o,class:"contamination-card"},[(0,n.Lk)("div",_,[(0,n.Lk)("h4",null,(0,i.v_)(e.name),1)]),(0,n.Lk)("div",P,[(0,n.Lk)("p",O,(0,i.v_)(e.last_value)+" "+(0,i.v_)(a[e.name]),1)])])))),128))]),(0,n.Lk)("div",z,[u[9]||(u[9]=(0,n.Lk)("h3",null,"Recomendaciones",-1)),(0,n.Lk)("ul",null,[l.value?((0,n.uX)(),(0,n.CE)("li",B,u[5]||(u[5]=[(0,n.Lk)("strong",null,"VentilaciÃ³n:",-1),(0,n.eW)(" Abra las ventanas para mejorar la circulaciÃ³n de aire. ")]))):(0,n.Q3)("",!0),r.value?((0,n.uX)(),(0,n.CE)("li",K,u[6]||(u[6]=[(0,n.Lk)("strong",null,"LimitaciÃ³n de actividades:",-1),(0,n.eW)(" Evite actividades fÃ­sicas intensas en este lugar. ")]))):(0,n.Q3)("",!0),c.value?((0,n.uX)(),(0,n.CE)("li",X,u[7]||(u[7]=[(0,n.Lk)("strong",null,"Advertencia:",-1),(0,n.eW)(" Se recomienda evacuar o usar equipo de protecciÃ³n adecuado. ")]))):(0,n.Q3)("",!0),d.value?((0,n.uX)(),(0,n.CE)("li",R,u[8]||(u[8]=[(0,n.Lk)("strong",null,"Ã“ptimo:",-1),(0,n.eW)(" Los niveles de contaminaciÃ³n son adecuados para todas las actividades. ")]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",N,[u[10]||(u[10]=(0,n.Lk)("button",{class:"download-button"},"Descargar Informe",-1)),(0,n.Lk)("button",{class:"close-button-secondary",onClick:u[1]||(u[1]=a=>e.$emit("close"))},"Cerrar")])])])]))}};const H=(0,d.A)(j,[["__scopeId","data-v-f0363552"]]);var I=H,Q={__name:"MainLayout",setup(e){const a=(0,p.KR)(!1),o=(0,p.KR)(null),t=((0,p.KR)(null),e=>{o.value=e,a.value=!0}),l=()=>{a.value=!1},r=(0,p.KR)(null),c=(0,p.KR)(null),d=(0,p.KR)([]),s=()=>{console.log("Abrir/cerrar menÃº lateral")},u=C.icon({iconUrl:M,iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30],shadowUrl:L,shadowSize:[60,30],shadowAnchor:[15,30]});return(0,n.sV)((async()=>{if(!r.value)return;c.value=C.map("map",{zoomControl:!0,zoom:1,zoomAnimation:!1,fadeAnimation:!0,markerZoomAnimation:!0}).setView([-12.10057710407106,-76.98658195437011],15),C.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(c.value);try{d.value=await A(),console.log("Things:",d.value)}catch(a){console.error("Error al cargar las Things:",a)}c.value.whenReady((async()=>{const e=C.markerClusterGroup(),a={co2:[{max:400,color:"#00FF00",label:"Bajo (Excelente)"},{max:1e3,color:"#FFFF00",label:"Moderado"},{max:2e3,color:"#FFA500",label:"Alto (PrecauciÃ³n)"},{max:5e3,color:"#FF4500",label:"Muy alto (Peligro)"},{max:1/0,color:"#8B0000",label:"Extremo (Emergencia)"}],pm10:[{max:50,color:"#00FF00",label:"Bueno"},{max:100,color:"#FFFF00",label:"Moderado"},{max:250,color:"#FFA500",label:"Poco saludable"},{max:350,color:"#FF4500",label:"Muy daÃ±ino"},{max:1/0,color:"#8B0000",label:"Peligroso"}],pm25:[{max:30,color:"#00FF00",label:"Bueno"},{max:60,color:"#FFFF00",label:"Moderado"},{max:150,color:"#FFA500",label:"Poco saludable"},{max:250,color:"#FF4500",label:"Muy daÃ±ino"},{max:1/0,color:"#8B0000",label:"Peligroso"}]};function o(e){return e.includes("Bajo (Excelente)")?"https://media.giphy.com/media/l0MYSvPXN9StPGx4k/giphy.gif":e.includes("Moderado")?"https://media.giphy.com/media/JoV2BiMWVZ96taSewG/giphy.gif":e.includes("Alto")||e.includes("PrecauciÃ³n")?"https://media.giphy.com/media/3o7TKsQzRs1VWXuG3u/giphy.gif":e.includes("Muy alto")||e.includes("Peligro")?"https://media.giphy.com/media/xT0GqH01ZyKwd3aT3G/giphy.gif":e.includes("Extremo")||e.includes("Emergencia")?"https://media.giphy.com/media/3o7aD4GrHwn8vsGBTa/giphy.gif":"https://media.giphy.com/media/Hkya3YFcXcmQ0/giphy.gif"}function n(e){return e.includes("Bueno")?"https://media.giphy.com/media/3ohzdJVOJsJR3nN0zK/giphy.gif":e.includes("Moderado")?"https://media.giphy.com/media/toXKzaJP3WIgM/giphy.gif":e.includes("Poco saludable")?"https://media.giphy.com/media/kEuaRuXBVLfTAcUb9v/giphy.gif":e.includes("Muy daÃ±ino")?"https://media.giphy.com/media/3o7TKzzMMNluisJTFe/giphy.gif":e.includes("Peligroso")?"https://media.giphy.com/media/l0ExheuOUuXZ8F72g/giphy.gif":"https://media.giphy.com/media/f6hnhHkks8bk4jwjh3/giphy.gif"}function i(e){return e.includes("Bueno")?"https://media.giphy.com/media/3o7TKEKj0pMjzs7Fv2/giphy.gif":e.includes("Moderado")?"https://media.giphy.com/media/kHZVpxPHv5Rkk/giphy.gif":e.includes("Poco saludable")?"https://media.giphy.com/media/l2JJvKbgIEsD55EZi/giphy.gif":e.includes("Muy daÃ±ino")?"https://media.giphy.com/media/eK12uCsrAh4wmTXejp/giphy.gif":e.includes("Peligroso")?"https://media.giphy.com/media/gj4ZUnOLg0Us4p5jft/giphy.gif":"https://media.giphy.com/media/3o7TKsQGzYHxz5OfAA/giphy.gif"}F.forEach((l=>{if(l.latitude&&l.longitude&&d.value.length>2){d.value[0],d.value[1];const r=d.value[2]||{name:"Desconocido",last_value:"N/A"},c=d.value[3]||{name:"Desconocido",last_value:"N/A"},s=(d.value[4],d.value[5]||{name:"Desconocido",last_value:"N/A"}),m=parseFloat(r.last_value)||0,p=parseFloat(c.last_value)||0,g=parseFloat(s.last_value)||0,v=a.co2.find((e=>m<=e.max)),h=a.pm10.find((e=>p<=e.max)),f=a.pm25.find((e=>g<=e.max)),x=([v.color,h.color,f.color].sort(((e,o)=>Object.values(a).flat().find((e=>e.color===o)).max-Object.values(a).flat().find((a=>a.color===e)).max))[0],document.createElement("button"));x.textContent="+ Info",x.style.cssText="\n    background-color: #3b82f6; \n    color: white; \n    padding: 10px 20px; \n    border-radius: 5px; \n    border: none; \n    cursor: pointer;\n    margin-top: 10px;\n  ",x.addEventListener("click",(()=>{t(I)}));const y=document.createElement("div");y.innerHTML=`\n<div style="color: #000; background-color: white; padding: 20px; border-radius: 10px; text-align: center; font-weight: bold; width: 500px; max-width: 900px; margin: 0 auto; overflow: hidden; box-shadow: 0 0 10px rgba(0,0,0,0.1);">\n    <h3 style="margin: 0 0 15px; font-size: 1.5em;">Niveles de ContaminaciÃ³n</h3>\n    \n    \x3c!-- Contenedor con columnas verticales --\x3e\n    <div style="display: flex; flex-direction: row; justify-content: space-between; text-align: center; color: #000;">\n        \n        \x3c!-- Columna CO2 --\x3e\n        <div style="flex: 1; padding: 10px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center;">\n            <p style="font-size: 1.1em; background-color: ${v.color}; padding: 8px; border-radius: 8px; width: 100%; margin-bottom: 15px;">\n                CO2: ${m} ppm â€” ${v.label}\n            </p>\n            <div style="width: 100%; text-align: center; padding: 0 5px;">\n                <img src="${o(v.label)}" style="width: 150px; max-width: 100%; height: auto; border-radius: 8px;" alt="Nivel de CO2">\n            </div>\n        </div>\n        \n        \x3c!-- Columna PM10 --\x3e\n        <div style="flex: 1; padding: 10px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center;">\n            <p style="font-size: 1.1em; background-color: ${h.color}; padding: 8px; border-radius: 8px; width: 100%; margin-bottom: 15px;">\n                PM10: ${p} Âµg/mÂ³ â€” ${h.label}\n            </p>\n            <div style="width: 100%; text-align: center; padding: 0 5px;">\n                <img src="${n(h.label)}" style="width: 150px; max-width: 100%; height: auto; border-radius: 8px;" alt="Nivel de PM10">\n            </div>\n        </div>\n        \n        \x3c!-- Columna PM2.5 --\x3e\n        <div style="flex: 1; padding: 10px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center;">\n            <p style="font-size: 1.1em; background-color: ${f.color}; padding: 8px; border-radius: 8px; width: 100%; margin-bottom: 15px;">\n                PM2.5: ${g} Âµg/mÂ³ â€” ${f.label}\n            </p>\n            <div style="width: 100%; text-align: center; padding: 0 5px;">\n                <img src="${i(f.label)}" style="width: 150px; max-width: 100%; height: auto; border-radius: 8px;" alt="Nivel de PM2.5">\n            </div>\n        </div>\n        \n    </div>\n</div>\n`,y.appendChild(x);const b=document.getElementById("popup-container");b&&(b.innerHTML="",b.appendChild(y));const k=C.marker([l.latitude,l.longitude],{icon:u}).bindPopup(y,{maxWidth:"auto",minWidth:400,maxHeight:500});e.addLayer(k)}})),c.value.addLayer(e),e.getLayers().length>0&&c.value.fitBounds(e.getBounds())}));const e=C.control({position:"bottomleft"});e.onAdd=function(){const e=C.DomUtil.create("div","info legend"),a=[0,20,40,60,80,100],o=["#00FF00","#FFFF00","#FFA500","#FF4500","#FF0000","#8B0000"];e.innerHTML="<strong>Niveles de ContaminaciÃ³n</strong><br>";for(let t=0;t<a.length;t++)e.innerHTML+=`<i style="background:${o[t]}; width: 18px; height: 18px; display: inline-block; margin-right: 8px;"></i> \n                ${a[t]}% ${a[t+1]?" - "+a[t+1]+"%":"+"}<br>`;return e},e.addTo(c.value)})),(e,o)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",null,[(0,n.bF)(m,{onToggleDrawer:s}),o[0]||(o[0]=(0,n.Lk)("h1",null,"Arduino Things",-1)),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(d.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.last_value},(0,i.v_)(e.name)+" (Valor: "+(0,i.v_)(e.last_value)+") ",1)))),128))])]),(0,n.Lk)("div",{id:"map",ref_key:"mapContainer",ref:r,style:{height:"515px"}},null,512),a.value?((0,n.uX)(),(0,n.Wv)(I,{key:0,onClose:l})):(0,n.Q3)("",!0),(0,n.bF)(x,{class:"bg-red-500 text-white"})],64))}};const U=Q;var W=U,G={__name:"App",setup(e){return(e,a)=>((0,n.uX)(),(0,n.CE)("main",null,[(0,n.bF)(W)]))}};const D=G;var J=D;(0,t.Ef)(J).mount("#app")}},a={};function o(t){var n=a[t];if(void 0!==n)return n.exports;var i=a[t]={exports:{}};return e[t].call(i.exports,i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(a,t,n,i){if(!t){var l=1/0;for(s=0;s<e.length;s++){t=e[s][0],n=e[s][1],i=e[s][2];for(var r=!0,c=0;c<t.length;c++)(!1&i||l>=i)&&Object.keys(o.O).every((function(e){return o.O[e](t[c])}))?t.splice(c--,1):(r=!1,i<l&&(l=i));if(r){e.splice(s--,1);var d=n();void 0!==d&&(a=d)}}return a}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[t,n,i]}}(),function(){o.d=function(e,a){for(var t in a)o.o(a,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={524:0};o.O.j=function(a){return 0===e[a]};var a=function(a,t){var n,i,l=t[0],r=t[1],c=t[2],d=0;if(l.some((function(a){return 0!==e[a]}))){for(n in r)o.o(r,n)&&(o.m[n]=r[n]);if(c)var s=c(o)}for(a&&a(t);d<l.length;d++)i=l[d],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(s)},t=self["webpackChunkjorgeproject"]=self["webpackChunkjorgeproject"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=o.O(void 0,[504],(function(){return o(8990)}));t=o.O(t)})();
//# sourceMappingURL=app.5a93ffa4.js.map